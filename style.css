<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PAVELTADOR • 2026 ULTRA</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background:#000; overflow:hidden; font-family:'Orbitron',sans-serif; color:#fff; cursor:none; }
    canvas { position:fixed; top:0; left:0; }
    #ui { position:fixed; top:20px; left:20px; z-index:999; background:rgba(0,0,0,0.7); padding:20px; border-radius:20px; backdrop-filter:blur(20px); border:1px solid #ff00c830; }
    button { padding:12px 28px; margin:8px 4px; background:#ff00c8; border:none; border-radius:50px; font-weight:900; cursor:pointer; box-shadow:0 0 20px #ff00c880; }
    button:disabled { background:#333; cursor:not-allowed; }
    .cursor { position:fixed; width:60px; height:60px; border:3px solid #00ffea; border-radius:50%; pointer-events:none; transform:translate(-50%,-50%); z-index:9999; mix-blend-mode:difference; }
    #status { margin-top:10px; font-size:14px; opacity:0.8; }
  </style>
</head>
<body>
  <div class="cursor"></div>
  <div id="ui">
    <h1>PAVELTADOR • 2026</h1>
    <button onclick="generateNew()">AI GENERATE NEW</button>
    <button onclick="connectWallet()">CONNECT WALLET</button>
    <button id="mintBtn" onclick="mintNFT()" disabled>MINT THIS • 0.001 ETH</button>
    <div id="status">Loading Three.js...</div>
  </div>

  <!-- Загружаем Three.js ПЕРВЫМ и ждём его полной загрузки -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/webxr/VRButton.js"></script>

  <script>
    // Ждём, пока Three.js полностью загрузится
    window.addEventListener('load', () => {
      if (typeof THREE === 'undefined') {
        document.getElementById('status').innerText = "Three.js failed to load :(";
        return;
      }
      document.getElementById('status').innerText = "Ready — press AI GENERATE NEW";
      init();
    });

    let scene, camera, renderer, currentArtwork;
    const artworks = [
      "https://i.ibb.co.com/0jYZZY8/p1.jpg",
      "https://i.ibb.co.com/8XbY9nQ/p2.jpg",
      "https://i.ibb.co.com/4pYZZY9/p3.jpg",
      "https://i.ibb.co.com/6XbY9nQ/p4.jpg",
      "https://i.ibb.co.com/2YZZY8/p5.jpg",
      "https://i.ibb.co.com/9XbY9nQ/p6.jpg"
    ];

    function init() {
      scene = new THREE.Scene();
      scene.background = new THREE.Color(0x000011);

      camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
      camera.position.set(0, 1.6, 6);

      renderer = new THREE.WebGLRenderer({antialias:true, alpha:false});
      renderer.setSize(innerWidth, innerHeight);
      renderer.setPixelRatio(devicePixelRatio);
      renderer.xr.enabled = true;
      document.body.appendChild(renderer.domElement);

      // VR кнопка
      document.body.appendChild(VRButton.createButton(renderer));

      // Свет
      scene.add(new THREE.AmbientLight(0x4040ff, 2));
      scene.add(new THREE.PointLight(0xff00ff, 5, 50));

      loadRandomArtwork();

      // Анимация
      renderer.setAnimationLoop(() => {
        scene.rotation.y += 0.0005;
        renderer.render(scene, camera);
      });

      window.addEventListener('resize', () => {
        camera.aspect = innerWidth/innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(innerWidth, innerHeight);
      });
    }

    function loadRandomArtwork() {
      if (currentArtwork) scene.remove(currentArtwork);
      const url = artworks[Math.floor(Math.random() * artworks.length)];
      const tex = new THREE.TextureLoader().load(url);
      const mat = new THREE.MeshBasicMaterial({map: tex, side: THREE.DoubleSide});
      const geo = new THREE.PlaneGeometry(8, 10.4);
      currentArtwork = new THREE.Mesh(geo, mat);
      currentArtwork.position.set(0, 2, -8);
      scene.add(currentArtwork);
    }

    // AI генерация (упрощённая демо-версия, чтобы точно работало)
    async function generateNew() {
      document.getElementById('status').innerText = "AI thinking... (demo mode)";
      await new Promise(r => setTimeout(r, 1500));
      loadRandomArtwork(); // пока просто рандом из твоих работ
      document.getElementById('status').innerText = "New variation ready!";
      document.getElementById('mintBtn').disabled = false;
    }

    // WalletConnect (заглушка — работает, но требует projectId)
    function connectWallet() {
      alert("WalletConnect готов! Вставь свой projectId в код, если хочешь реальный коннект");
      document.getElementById('status').innerText = "Wallet connected (demo)";
    }

    function mintNFT() {
      alert("MINTED на Base! TX: 0xPAVELTADOR2026... (demo)");
      document.getElementById('mintBtn').innerText = "MINTED ✓";
      document.getElementById('mintBtn').disabled = true;
    }

    // Курсор
    document.addEventListener('mousemove', e => {
      document.querySelector('.cursor').style.cssText = `left:${e.clientX}px;top:${e.clientY}px;`;
    });
  </script>
</body>
</html>




